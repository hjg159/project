"use strict";$(function(){console.log("加载成功");var t=$("#box"),n=$("#leftBtn"),e=$("#rightBtn"),o=$("#carousel"),i=$("#cirs li");o.children("li:first-child").clone().appendTo(o);var a=t.width(),c=0;function l(){i.each(function(t,n){t===c?$(n).addClass("active"):$(n).removeClass("active")})}e.click(function(){c++,o.stop(!0,!0).animate({left:-c*a},2e3,"linear",function(){5<=c&&($(this).css("left",0),c=0),l()})}),n.click(function(){--c<0&&(c=5,o.css("left",-c*a),c--),o.stop().animate({left:-c*a},2e3,function(){l()})}),i.each(function(t,n){$(n).click(function(){t!==c&&(c=t,o.animate({left:-t*a},2e3,function(){l()}))})});var r=setInterval(function(){e.trigger("click")},4e3);t.mouseenter(function(){clearInterval(r)}),t.mouseleave(function(){r=setInterval(function(){e.trigger("click")},4e3)});var s=[];$.ajax({type:"GET",url:"../php/goodlist2.php",success:function(t){if(JSON.parse(t)){s=JSON.parse(t),console.log(s);var e=' <ul  style="width:100%" class="row wrap-column list-group list-group-horizontal-sm">';return $.each(JSON.parse(t),function(t,n){e+='\n                    <li class="col col-4 list-group-item " style="padding: 0 10px; border: none">\n                        <div class="card" >\n                            <img src="'+n.image+'" class="card-img-top" alt="...">\n                            <div class="card-body">\n                                <p class="card-text"><a href="./detail.html?id='+n.product_id+'">'+n.name+'</a></p>\n                                <p class="d-flex justify-content-between align-items-center card-text"><span>￥'+n.del+' </span><button type="button" data-id="'+n.product_id+'" class="btn btn-primary">加入购物车</button></p>\n                            </div>\n                        </div>\n                    </li>\n                    '}),e+="</ul>",$("#paginationContainer").append(e),e}throw new Error("请求失败")}}),paginationContainer.onclick=function(t){var n,e,o,i,a;"button"===t.target.tagName.toLowerCase()&&(n=t.target.getAttribute("data-id"),console.log("当前点的是按钮，商品id是"+n),e=s.find(function(t){return console.log(t),t.product_id===n}),o=localStorage.getItem("04_shoppingcar")||"[]",i=JSON.parse(o),console.log(i),(a=i.find(function(t){return t.product_id===n}))?a.count++:(e.count=1,i.push(e)),console.log(a),localStorage.setItem("04_shoppingcart",JSON.stringify(i)),location.href="./04_shoppingcar.html")}});